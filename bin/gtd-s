#!/bin/bash
source ./gtd-call-check

set +u
if [[ "${2}" == "" ]]
then
	echo "Argument required to gtd-show - task number"
	echo ""
	sleep 2 && ./gtd-help
fi
set -u
readonly SHOW_TASK_NO="${2}"
assert_is_num "${SHOW_TASK_NO}"

(
embolden "Status: "
ls -d "${ROOT_FOLDER}/${STATUS_FOLDER}/"*"/${SHOW_TASK_NO}" | sed "s|.*${STATUS_FOLDER}.\([^\/]*\).${SHOW_TASK_NO}|\1|"
embolden "Priority: "
ls -d "${ROOT_FOLDER}/${PRIORITY_FOLDER}/"*"/${SHOW_TASK_NO}" | sed "s|.*${PRIORITY_FOLDER}.\([^\/]*\).${SHOW_TASK_NO}|\1|"
cd "${ROOT_FOLDER}/${TASKS_FOLDER}/${SHOW_TASK_NO}" || return
dotfiles=$(ls .[a-z]*)
for file in ${dotfiles}
do
	if [[ $file == ".remindme" ]]
	then
		embolden "Reminder set for: "
		time_diff_desc "$(cat "$file")"
	fi
done
embolden "Task ${SHOW_TASK_NO} files:"
ls
embolden "Task ${SHOW_TASK_NO} notes.md:"
echo
echo
cat notes.md
)
